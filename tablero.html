<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>TABLERO DE JIU JITSU - WAC TEAM</title>
	<!-- RESOLUCIÓN: 1366 X 768 -->

	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">
</head>

<body style="background-color:#E6E6FA; overflow-x: hidden;">

	<script>

		var bocina = new Audio('resources/air_horn.mp3');

		var version = 'Adultos';

		var competidor = [
			{
				estado: 'activo',
				kimono: 0,
				puntos: 0,
				ventajas: 0,
				faltas: 0
			},
			{
				estado: 'activo',
				kimono: 0,
				puntos: 0,
				ventajas: 0,
				faltas: 0
			}
		];

		var ejecucionCronometro = false;
		
		var decimas = 10;
		var segundos = 0;
		var minutos = 5;
		
		var map = []; 
		onkeydown = onkeyup = function (e) {
			e = e || event; 
			map[e.keyCode] = e.type == 'keydown';
			//49 y 97 son los códigos del número 1 en ambos teclados 
			//50 y 98 son los códigos del número 2 en ambos teclados
			//83 es el código de la tecla 'S' para sumisión
			//68 es el código de la tecla 'D' para descalificación
			if ((map[49] || map[97]) && map[83] && competidor[0]['estado'] == 'activo') {
				competidor[0]['estado'] = 'sumision';
				actualizarEstadoCompetidores();
			} else if ((map[49] || map[97]) && map[83] && competidor[0]['estado'] == 'sumision') {
				competidor[0]['estado'] = 'activo';
				actualizarEstadoCompetidores();
			} else if ((map[49] || map[97]) && map[68] && competidor[0]['estado'] == 'activo') {
				competidor[0]['estado'] = 'descalificado';
				actualizarEstadoCompetidores();
			} else if ((map[49] || map[97]) && map[68] && competidor[0]['estado'] == 'descalificado') {
				competidor[0]['estado'] = 'activo';
				actualizarEstadoCompetidores();
			} else if ((map[50] || map[98]) && map[83] && competidor[1]['estado'] == 'activo') {
				competidor[1]['estado'] = 'sumision';
				actualizarEstadoCompetidores();
			} else if ((map[50] || map[98]) && map[83] && competidor[1]['estado'] == 'sumision') {
				competidor[1]['estado'] = 'activo';
				actualizarEstadoCompetidores();
			} else if ((map[50] || map[98]) && map[68] && competidor[1]['estado'] == 'activo') {
				competidor[1]['estado'] = 'descalificado';
				actualizarEstadoCompetidores();
			} else if ((map[50] || map[98]) && map[68] && competidor[1]['estado'] == 'descalificado') {
				competidor[1]['estado'] = 'activo';
				actualizarEstadoCompetidores();
			}
		}

		function actualizarEstadoCompetidores() {
			if (competidor[0]['estado'] == 'sumision') {
				document.body.innerHTML +=
					'<div id="comp1EstadoArea"; style="position:absolute; top:22.8em; left:0.3em; width:48.2em; height:31.8em; background-color:green; text-align:center;"> <h1 style="position:absolute; top:20%; color:white; font-size:8em;">Victoria por sumisión</h1> </div>';
			} else if (competidor[0]['estado'] == 'descalificado') {
				document.body.innerHTML +=
					'<div id="comp1EstadoArea"; style="position:absolute; top:22.8em; left:0.3em; width:48.2em; height:31.8em; background-color:gray; text-align:center;"> <h1 style="position:absolute; top:35%; color:white; font-size:8em;">Descalificado</h1> </div>';
			} else if (competidor[0]['estado'] == 'activo') {
				try {
					var element = document.getElementById("comp1EstadoArea");
					element.parentNode.removeChild(element);
				} catch (err) {
					console.log("No se encontró el estado del competidor 1")
				}	
			}
			if (competidor[1]['estado'] == 'sumision') {
				document.body.innerHTML +=
					'<div id="comp2EstadoArea"; style="position:absolute; top:22.8em; left:49em; width:48.4em; height:31.8em; background-color:green; text-align:center;" > <h1 style="position:absolute; top:20%; color:white; font-size:8em;">Victoria por sumisión</h1> </div>';
			} else if (competidor[1]['estado'] == 'descalificado') {
				document.body.innerHTML +=
					'<div id="comp2EstadoArea"; style="position:absolute; top:22.8em; left:49em; width:48.4em; height:31.8em; background-color:gray; text-align:center;"> <h1 style="position:absolute; top:35%; color:white; font-size:8em;">Descalificado</h1> </div>';
			} else if (competidor[1]['estado'] == 'activo') {
				try {
					var element = document.getElementById("comp2EstadoArea");
					element.parentNode.removeChild(element);	
				} catch (err) {
					console.log("No se encontró el estado del competidor 2")
				}
			}
		}
		
		//iniciar el cronómetro al pulsar 'enter'
		document.onkeypress = function (event) {
			if (event.keyCode == 13) {
				if (!ejecucionCronometro) { 
					iniciarCronometro(); 
				} else { 
					detenerCronometro(); 
				}
			}
		}

		function cronometro() {
			if (ejecucionCronometro) {
				decimas -= 1;
				// segundos
				if (decimas < 0) {
					decimas = 9;
					segundos -= 1;
				}
				// minutos
				if (segundos < 0) {
					segundos = 59;
					minutos -= 1;
				}
				// mostrar reloj
				escribirReloj();
				// ejecucion reloj
				if (segundos == 0 && minutos == 0) { 
					finalizarCronometro(); 
				} else { 
					setTimeout("cronometro()", 100); 
				}
			}
		}

		//inicia el cronómetro
		function iniciarCronometro() { 
			if (segundos == 0 && minutos == 0) { 
				finalizarCronometro(); 
			} else {
				ejecucionCronometro = true; 
				cronometro();
			} 
		}      

		//detiene el cronómetro
		function detenerCronometro() { 
			ejecucionCronometro = false; 
		}   

		// cuando el cronómetro finaliza
		function finalizarCronometro() {
			detenerCronometro();
			bocina.play();
		} 

		function modificarReloj(tiempo, tipo, operacion) {
			if (tiempo == 'segundos') {
				if (tipo == 'decena') {
					if (operacion == 'mas') {
						if (segundos <= 49) { segundos = segundos + 10; }
					} else if (operacion == 'menos') {
						if (segundos >= 10) { segundos = segundos - 10; }
					}
				} else if (tipo == 'unidad') {
					if (operacion == 'mas') {
						if (segundos <= 58) { segundos = segundos + 1; }
					} else if (operacion == 'menos') {
						if (segundos >= 1) { segundos = segundos - 1; }	
					}
				}
			} else if (tiempo == 'minutos') {
				if (tipo == 'decena') {
					if (operacion == 'mas') {
						if (minutos <= 89) { minutos = minutos + 10; }
					} else if (operacion == 'menos') {
						if (minutos >= 10) { minutos = minutos - 10; }
					}
				} else if (tipo == 'unidad') {
					if (operacion == 'mas') {
						if (minutos <= 98) { minutos = minutos + 1; }
					} else if (operacion == 'menos') {
						if (minutos >= 1) { minutos = minutos - 1; }
					}
				}
			}
			escribirReloj();
		}  

		function escribirReloj() {
			if (minutos < 10) {
				document.getElementById('minReloj').innerHTML = '0' + minutos;
			} else {
				document.getElementById('minReloj').innerHTML = minutos;
			}
			if (segundos < 10) {
				document.getElementById('segReloj').innerHTML = '0' + segundos;
			} else {
				document.getElementById('segReloj').innerHTML = segundos;
			}
		}

		function obtenerRival(comp) {
			if (comp == 0) {
				return 1;
			} else if (comp == 1) {
				return 0; 
			}
		}

		function cambiarKimono(comp) {
			var kimono;
			competidor[comp]['kimono']++;
			if (competidor[comp]['kimono'] == 4) {
				competidor[comp]['kimono'] = 0;
			}
			if (comp == 0) {
				kimono = document.getElementById('kimono1');
			} else if (comp == 1) {
				kimono = document.getElementById('kimono2');
			}
			if (competidor[comp]['kimono'] == 0) {kimono.style.backgroundColor = "white";}
			else if (competidor[comp]['kimono'] == 1) {kimono.style.backgroundColor = "blue";}
			else if (competidor[comp]['kimono'] == 2) {kimono.style.backgroundColor = "black";}
			else if (competidor[comp]['kimono'] == 3) {kimono.style.backgroundColor = "pink";}
		}

		function modificarPuntuacion(comp, atributo, valor) {
			competidor[comp][atributo] += valor;
			escribirPuntuacion();
			if (atributo == 'faltas') {
				verificarFaltas(comp);
			}
		}

		function escribirPuntuacion() {
			document.getElementById('comp1Puntos').innerHTML = competidor[0]['puntos'];
			document.getElementById('comp1Ventajas').innerHTML = competidor[0]['ventajas'];
			document.getElementById('comp1Faltas').innerHTML = competidor[0]['faltas'];
			document.getElementById('comp2Puntos').innerHTML = competidor[1]['puntos'];
			document.getElementById('comp2Ventajas').innerHTML = competidor[1]['ventajas'];
			document.getElementById('comp2Faltas').innerHTML = competidor[1]['faltas'];
		}

		function verificarFaltas(comp) {
			if (version == 'Adultos') {
				if (competidor[comp]['faltas'] == 2) { modificarPuntuacion(obtenerRival(comp), 'ventajas', 1); }
				else if (competidor[comp]['faltas'] == 3) { modificarPuntuacion(obtenerRival(comp), 'puntos', 2); }
				else if (competidor[comp]['faltas'] == 4) { competidor[comp]['estado'] = 'descalificado'; actualizarEstadoCompetidores(); }
			}
			if (version == 'Menores') {
				if (competidor[comp]['faltas'] == 2) { modificarPuntuacion(obtenerRival(comp), 'ventajas', 1); }
				else if (competidor[comp]['faltas'] >= 3 && competidor[comp]['faltas'] <= 5) { modificarPuntuacion(obtenerRival(comp), 'puntos', 2); }
				else if (competidor[comp]['faltas'] == 6) { competidor[comp]['estado'] = 'descalificado'; actualizarEstadoCompetidores(); }
			}
		}
		
		function cambiarVersion() {
			if (version == 'Adultos') {
				version = 'Menores';
			} else
			if (version == 'Menores') {
				version = 'Adultos';
			}
			document.getElementById('versionTablero').innerHTML = version;
		}

		function mostrarCreditos() {
			alert('DESARROLLADO PARA:\n* WAC Team\n* Kanji de Lutas\n\nDESARROLLADOR:\nJuan D. Gamboa\njjddgg9999@gmail.com');
		}

	</script>

	<div class="container-fluid">
		<div class="row">

			<!-- LOGO -->
			<div class="col-md-3" style=" text-align: center; border: 4px solid black; ">
				<img alt="WAC Team" src="resources/alzate_team.png" width="170 em" height="170 em" style="margin: 1.05em 0px 1.05em 0px ">
			</div>

			<!-- RELOJ -->
			<div class="col-md-6" style="border: 4px solid black; ">
				<div class="row">
					<div class="col-md-5">
						<h1 style="text-align:center; font-size:11em;" id="minReloj"> 05 </h1>
					</div>
					<div style="position:absolute; left:4em; height:3em; width:5.5em;" onClick="modificarReloj('minutos', 'decena', 'mas')"> </div>
					<div style="position:absolute; left:10em; height:3em; width:5.5em;" onClick="modificarReloj('minutos', 'unidad', 'mas')"> </div>
					<div style="position:absolute; top:11.3em; left:4em; height:3em; width:5.5em;" onClick="modificarReloj('minutos', 'decena', 'menos')"> </div>
					<div style="position:absolute; top:11.3em; left:10em; height:3em; width:5.5em;" onClick="modificarReloj('minutos', 'unidad', 'menos')"> </div>
					<div class="col-md-2">
						<h1 style="text-align:center; font-size:11em;"> : </h1>
					</div>
					<div class="col-md-5">
						<h1 style="text-align:center; font-size:11em;" id="segReloj"> 00 </h1>
					</div>
					<div style="position:absolute; left:32em; height:3em; width:5.5em;" onClick="modificarReloj('segundos', 'decena', 'mas')"> </div>
					<div style="position:absolute; left:38em; height:3em; width:5.5em;" onClick="modificarReloj('segundos', 'unidad', 'mas')"> </div>
					<div style="position:absolute; top:11.3em; left:32em; height:3em; width:5.5em;" onClick="modificarReloj('segundos', 'decena', 'menos')"> </div>
					<div style="position:absolute; top:11.3em; left:38em; height:3em; width:5.5em;" onClick="modificarReloj('segundos', 'unidad', 'menos')"> </div>
				</div>
			</div>

			<div class="col-md-3" style="border: 4px solid black; text-align:center;">
				<div onClick="cambiarVersion()">
					<h3 style="text-align:center;">
						<b>TABLERO DE JIU JITSU</b>
					</h3>
					<!-- version -->
					<h4 style="text-align:center;" id="versionTablero"> Adultos </h4>
				</div>
				<!-- IMÁGENES WAC/KANJI -->
				<div class="row">
					<div class="col-md-4" style=" text-align: center">
						<img id="imgWACTeam" alt="WAC" src="resources/alzate_team.png" width="70 em" height="70 em" style="margin: 2em 0px 1.15em 0px" onClick="mostrarCreditos()">
					</div>
					<div class="col-md-4" style=" text-align: center"></div>
					<div class="col-md-4" style=" text-align: center">
						<img id="imgKanji" alt="Kanji" src="resources/kanji.png" width="70 em" height="70 em" style="margin: 2em 0px 1.15em 0px" onClick="mostrarCreditos()">
					</div>
				</div>
			</div>
		</div>

		<!-- COMPETIDOR CABECERA -->
		<div class="row">
			<div class="col-md-6" style="border: 4px solid black; text-align:center;">
				<p style="font-size:1.5em; font-weight: bold; margin: 0em 0em 0em 0em; padding: 0em 0em 0em 0em" height="30em" width="200em">COMPETIDOR #1</p>
			</div>
			<div class="col-md-6" style="border: 4px solid black; text-align:center;">
				<p style="font-size:1.5em; font-weight: bold; margin: 0em 0em 0em 0em; padding: 0em 0em 0em 0em" height="30em" width="200em">COMPETIDOR #2</p>
			</div>
		</div>

		<!-- KIMONOS -->
		<div class="row">
			<div id="kimono1" class="col-md-6" style="border: 4px solid black; background-color:white; height:5.05em;" onClick="cambiarKimono(0)"></div>
			<div id="kimono2" class="col-md-6" style="border: 4px solid black; background-color:white; height:5.05em;" onClick="cambiarKimono(1)"></div>
		</div>

		<!-- PUNTOS CABECERA -->
		<div class="row">
			<div class="col-md-6" style="border: 4px solid black; text-align:center;">
				<p style="font-size:1.5em; font-weight: bold; margin: 0em 0em 0em 0em; padding: 0em 0em 0em 0em" height="30em" width="200em">PUNTOS</p>
			</div>
			<div class="col-md-6" style="border: 4px solid black; text-align:center;">
				<p style="font-size:1.5em; font-weight: bold; margin: 0em 0em 0em 0em; padding: 0em 0em 0em 0em" height="30em" width="200em">PUNTOS</p>
			</div>
		</div>
		<!-- puntos -->
		<div class="row">
			<div class="col-md-6" id="divComp1Puntos" style="text-align:center; max-height:11em; font-size:11em; border: 4px solid black; padding: 0em 0em 0em 0em;">
				<div style="position:absolute; height:1.43em; width:1.805em;" onClick="modificarPuntuacion(0, 'puntos', -1)"> </div>
				<p id="comp1Puntos" ; style="margin: 0em 0em 0em 0em;"> 0 </p>
				<div style="position:absolute; height:1.43em; width:1.805em; left:2.525em; top:-0.003em;" onClick="modificarPuntuacion(0, 'puntos', 1)"> </div>
			</div>
			<div class="col-md-6" id="divComp2Puntos" style="text-align:center; max-height:11em; font-size:11em; border: 4px solid black; padding: 0em 0em 0em 0em; 
		background: linear-gradient(90deg, #FFFF33 50%, #009966 50%);; background-size: 100% 100%;">
				<div style="position:absolute; height:1.43em; width:1.805em;" onClick="modificarPuntuacion(1, 'puntos', -1)"> </div>
				<p id="comp2Puntos" ; style="margin: 0em 0em 0em 0em;"> 0 </p>
				<div style="position:absolute; height:1.43em; width:1.805em; left:2.525em; top:-0.003em;" onClick="modificarPuntuacion(1, 'puntos', 1)"> </div>
			</div>
		</div> 
		
		<!-- VENTAJAS FALTAS CABECERA -->
		<div class="row">
			<div class="col-md-3" style="text-align:center; max-height:10em; border: 4px solid black; padding: 0em 0em 0em 0em">
				<p style="font-size:1.5em; font-weight: bold; margin: 0em 0em 0em 0em; padding: 0em 0em 0em 0em" height="30em" width="200em">VENTAJAS</p>
			</div>
			<div class="col-md-3" style="text-align:center; max-height:10em; border: 4px solid black; padding: 0em 0em 0em 0em">
				<p style="font-size:1.5em; font-weight: bold; margin: 0em 0em 0em 0em; padding: 0em 0em 0em 0em" height="30em" width="200em">FALTAS</p>
			</div>
			<div class="col-md-3" style="text-align:center; max-height:10em; border: 4px solid black; padding: 0em 0em 0em 0em">
				<p style="font-size:1.5em; font-weight: bold; margin: 0em 0em 0em 0em; padding: 0em 0em 0em 0em" height="30em" width="200em">VENTAJAS</p>
			</div>
			<div class="col-md-3" style="text-align:center; max-height:10em; border: 4px solid black; padding: 0em 0em 0em 0em">
				<p style="font-size:1.5em; font-weight: bold; margin: 0em 0em 0em 0em; padding: 0em 0em 0em 0em" height="30em" width="200em">FALTAS</p>
			</div>
		</div>
		<!-- ventajas faltas -->
		<div class="row">
			<div class="col-md-3" style="background-color:#FFFF33; text-align:center; max-height:10em; font-size:7em; border: 4px solid black; padding: 0em 0em 0em 0em">
				<div style="position:absolute; height:1.43em; width:1.3em;" onClick="modificarPuntuacion(0, 'ventajas', -1)"> </div>
				<p id="comp1Ventajas" ; style="margin: 0em 0em 0em 0em; padding: 0em 0em 0em 0em"> 0 </p>
				<div style="position:absolute; height:1.43em; width:1.3em; left:2.06em; top:-0.003em;" onClick="modificarPuntuacion(0, 'ventajas', 1)"> </div>
			</div>
			<div class="col-md-3" style="background-color:#CC3333; text-align:center; max-height:10em; font-size:7em; border: 4px solid black; padding: 0em 0em 0em 0em">
				<div style="position:absolute; height:1.43em; width:1.3em;" onClick="modificarPuntuacion(0, 'faltas', -1)"> </div>
				<p id="comp1Faltas" ; style="margin: 0em 0em 0em 0em; padding: 0em 0em 0em 0em"> 0 </p>
				<div style="position:absolute; height:1.43em; width:1.3em; left:2.06em; top:-0.003em;" onClick="modificarPuntuacion(0, 'faltas', 1)"> </div>
			</div>
			<div class="col-md-3" style="background-color:#FFFF33; text-align:center; max-height:10em; font-size:7em; border: 4px solid black; padding: 0em 0em 0em 0em">
				<div style="position:absolute; height:1.43em; width:1.3em;" onClick="modificarPuntuacion(1, 'ventajas', -1)"> </div>
				<p id="comp2Ventajas" ; style="margin: 0em 0em 0em 0em; padding: 0em 0em 0em 0em"> 0 </p>
				<div style="position:absolute; height:1.43em; width:1.3em; left:2.06em; top:-0.003em;" onClick="modificarPuntuacion(1, 'ventajas', 1)"> </div>
			</div>
			<div class="col-md-3" style="background-color:#CC3333; text-align:center; max-height:10em; font-size:7em; border: 4px solid black; padding: 0em 0em 0em 0em">
				<div style="position:absolute; height:1.43em; width:1.3em;" onClick="modificarPuntuacion(1, 'faltas', -1)"> </div>
				<p id="comp2Faltas" ; style="margin: 0em 0em 0em 0em; padding: 0em 0em 0em 0em"> 0 </p>
				<div style="position:absolute; height:1.43em; width:1.3em; left:2.06em; top:-0.003em;" onClick="modificarPuntuacion(1, 'faltas', 1)"> </div>
			</div>
		</div>

	</div>

	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/scripts.js"></script>
</body>

</html>